<html>

<head>
  <title>Welcome to Feathers</title>
</head>

<body>
  <div id="messageList"></div>



  <input type-"text" placeholder="message content" id="messageText" />
  <button onclick="sendMessage()">send</button>
  <script src="//unpkg.com/feathers-client@^1.0.0/dist/feathers.js"></script>
  <script src="socket.io/socket.io.js"></script>
  <script type="text/javascript">
    // Establish a Socket.io connection to the local server
    var socket = io();
    // Create a client side Feathers application that uses the socket
    // for connecting to services
    var app = feathers();
    app.configure(feathers.socketio(socket));
    // Retrieve a connection to the /messages service on the server
    // This service will use websockets for all communication
    var messages = app.service('messages');

    // Listen for when a new message has been created
    messages.on('created', function (message) {
      var messageList = document.getElementById("messageList");
      messageList.innerHTML += "<h4>" + message.text + "</h4>";

      console.log('Someone created a message', message);
    });

    // Create a new message on the service
    messages.create({
      text: 'Hello from websocket!'
    });
    function sendMessage() {
      var messageValue = document.getElementById("messageText").value;
      messages.create({text: messageValue});
    }

  </script>

</body>

</html>
